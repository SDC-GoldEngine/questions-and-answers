version: '3.8'

services:
 qa:
  build:
   context: .
  ports:
   - 3000:3000
   - 9229:9229
  environment:
   - SERVER_PORT=8000
   - CONNECTIONSTRING=mongodb://mongo:27017/notes
  volumes:
   - ./:/app
  command: npm run debug

 db:
  image: postgres:14
  command: postgres -c fsync=off -c synchronous_commit=off -c full_page_writes=off -c random_page_cost=1.0
  environment:
    - POSTGRES_PASSWORD=pw
  container_name: 'postgres-for-testing'
  ports:
    - '54310:5432'
